!function(){function t(){const t=localStorage.getItem("aaeReactionsPosts");return t?JSON.parse(t):[]}const e=function(e){const n=t();if(e.length){const o=e[0].querySelectorAll(".aaeaddon-reaction-btn");o.forEach((function(e){n.includes(WCF_ADDONS_JS.post_id)&&(e.disabled=!0),e.addEventListener("click",(function(){const n=e.dataset.rtype;e.disabled=!0,fetch(WCF_ADDONS_JS.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"aaeaddon_post_reaction",reaction:n,post_id:WCF_ADDONS_JS.post_id,nonce:WCF_ADDONS_JS._wpnonce})}).then((t=>t.json())).then((a=>{a.success?(e.querySelector(".aae-reaction-count")&&(e.querySelector(".aae-reaction-count").textContent=a.data[n]),e.disabled=!0,function(e){const n=t();n.includes(e)||(n.push(e),localStorage.setItem("aaeReactionsPosts",JSON.stringify(n)))}(WCF_ADDONS_JS.post_id),function(e){const n=t();e.forEach((function(t){n.includes(WCF_ADDONS_JS.post_id)&&(t.disabled=!0)}))}(o)):(e.textContent="Try Again",e.disabled=!1)})).catch((()=>{e.disabled=!1,e.textContent="Retry"}))}))}))}};window.addEventListener("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/aaeaddon-post-reactions.default",e)}))}();