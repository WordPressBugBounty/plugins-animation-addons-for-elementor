!function(e){var t=function(t){var a=e(".search--wrapper",t),n=e(".toggle--open",t),l=e(".toggle--close",t);n.on("click",(function(e){a.addClass("search-visible")})),l.on("click",(function(t){a.removeClass("search-visible"),e(".selected-category-display").html(""),o.find(".preset-options li").removeClass("selected"),d.removeClass("selected"),c.val(""),i.val("")})),e("input",t).focus((function(){e(".wcf-search-form",t).addClass("wcf-search-form--focus")})),e("input",t).focusout((function(){e(".wcf-search-form",t).removeClass("wcf-search-form--focus")}));var o=t.find(".date-container"),s=t.find(".category-container");o.find(".date-toggle").on("click",(function(e){e.preventDefault(),t.find(".date-container").not(o).removeClass("active"),o.toggleClass("active"),s.removeClass("active")}));var c=o.find(".from-date"),i=o.find(".to-date");o.find(".preset-options li").on("click",(function(){var t,a,n=e(this).data("preset"),l=new Date;switch(e(this).toggleClass("selected").siblings().removeClass("selected"),n){case"today":t=a=l;break;case"yesterday":t=a=new Date(l.setDate(l.getDate()-1));break;case"week":t=new Date(l.setDate(l.getDate()-6)),a=new Date;break;case"month":t=new Date(l.getFullYear(),l.getMonth(),1),a=new Date}c.val(t.toISOString().split("T")[0]),i.val(a.toISOString().split("T")[0])})),o.find(".clear-btn").on("click",(function(){c.val(""),i.val(""),o.find(".preset-options li").removeClass("selected")})),o.find(".apply-btn").on("click",(function(){o.removeClass("active"),y()}));var r=s.find(".category-toggle"),d=(s.find(".category-dropdown"),s.find(".category-list li"));s.find("#selectedCategory");r.on("click",(function(e){e.preventDefault(),t.find(".category-container").not(s).removeClass("active"),s.toggleClass("active"),o.removeClass("active")}));var f=[];d.on("click",(function(){var a=e(this),n=a.data("value"),l=a.text().trim();if(n){var o=f.findIndex((function(e){return e.value===n}));-1===o?(f.push({value:n,label:l}),a.addClass("selected")):(f.splice(o,1),a.removeClass("selected")),d.filter('[data-value=""]').removeClass("selected")}else f.length=0,d.removeClass("selected"),a.addClass("selected");s.find('input[name="category[]"]').remove(),f.forEach((function(e){s.append('<input type="hidden" name="category[]" value="'.concat(e.value,'"/>'))}));var c=t.find(".selected-category-display");f.length?c.html(f.map((function(e){return'<span class="category-pill">'.concat(e.label,"</span>")})).join(", ")):c.html('<span class="category-pill">All Categories</span>')})),s.find(".clear-cat-btn").on("click",(function(e){e.preventDefault(),f.length=0,d.removeClass("selected"),d.filter('[data-value=""]').addClass("selected"),s.find('input[name="category[]"]').remove(),t.find(".selected-category-display").html('<span class="category-pill">All Categories</span>')})),s.find(".apply-cat-btn").on("click",(function(e){e.preventDefault(),s.removeClass("active"),y()})),e(document).on("click.advancedSearchOutside",(function(e){t[0].contains(e.target)||t.find(".date-container, .category-container").removeClass("active")}));var v,u,g,p=t.find(".search-field"),m=t.find(".aae--live-search-results"),h=e(".search--wrapper.style-full-screen .wcf-search-container");function y(){if(p.length){var a=p.val().trim(),n=t.find(".from-date").val(),l=t.find(".to-date").val(),o=t.find('input[name="category[]"]');if(a||n||l||0!==o.length){var s={action:"live_search",keyword:a};n&&l&&(s.from_date=n,s.to_date=l),o.length>0&&(s.category=o.map((function(){return e(this).val()})).get()),e.ajax({url:WCF_ADDONS_JS.ajaxUrl,type:"POST",data:s,success:function(e){console.log(e),h.length&&h.addClass("ajax-fs-wrap"),m.html(e).css("display","grid"),t.find(".toggle--close").on("click",(function(){m.hide(),h.length&&h.removeClass("ajax-fs-wrap")}))},error:function(){m.html('<div class="error">Something went wrong.</div>').show()}})}else m.hide()}}p.on("keyup input",(v=y,u=500,function(){var e=this,t=arguments;clearTimeout(g),g=setTimeout((function(){return v.apply(e,t)}),u)}))};e(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/wcf--blog--search--form.default",t)}))}(jQuery);