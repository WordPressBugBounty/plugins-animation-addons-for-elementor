!function(e){const t=function(t){const n=e(".search--wrapper",t),a=e(".toggle--open",t),s=e(".toggle--close",t);a.on("click",function(e){n.addClass("search-visible")}),s.on("click",function(t){n.removeClass("search-visible"),e(".selected-category-display").html(""),o.find(".preset-options li").removeClass("selected"),d.removeClass("selected"),l.val(""),i.val("")}),e("input",t).focus(function(){e(".wcf-search-form",t).addClass("wcf-search-form--focus")}),e("input",t).focusout(function(){e(".wcf-search-form",t).removeClass("wcf-search-form--focus")});const o=t.find(".date-container"),c=t.find(".category-container");o.find(".date-toggle").on("click",function(e){e.preventDefault(),t.find(".date-container").not(o).removeClass("active"),o.toggleClass("active"),c.removeClass("active")});const l=o.find(".from-date"),i=o.find(".to-date");o.find(".preset-options li").on("click",function(){const t=e(this).data("preset"),n=new Date;let a,s;switch(e(this).toggleClass("selected").siblings().removeClass("selected"),t){case"today":a=s=n;break;case"yesterday":a=s=new Date(n.setDate(n.getDate()-1));break;case"week":a=new Date(n.setDate(n.getDate()-6)),s=new Date;break;case"month":a=new Date(n.getFullYear(),n.getMonth(),1),s=new Date}l.val(a.toISOString().split("T")[0]),i.val(s.toISOString().split("T")[0])}),o.find(".clear-btn").on("click",function(){l.val(""),i.val(""),o.find(".preset-options li").removeClass("selected")}),o.find(".apply-btn").on("click",function(){o.removeClass("active"),p()});const r=c.find(".category-toggle"),d=(c.find(".category-dropdown"),c.find(".category-list li"));c.find("#selectedCategory");r.on("click",function(e){e.preventDefault(),t.find(".category-container").not(c).removeClass("active"),c.toggleClass("active"),o.removeClass("active")});const f=[];d.on("click",function(){const n=e(this),a=n.data("value"),s=n.text().trim();if(a){const e=f.findIndex(e=>e.value===a);-1===e?(f.push({value:a,label:s}),n.addClass("selected")):(f.splice(e,1),n.removeClass("selected")),d.filter('[data-value=""]').removeClass("selected")}else f.length=0,d.removeClass("selected"),n.addClass("selected");c.find('input[name="category[]"]').remove(),f.forEach(e=>{c.append(`<input type="hidden" name="category[]" value="${e.value}"/>`)});const o=t.find(".selected-category-display");f.length?o.html(f.map(e=>`<span class="category-pill">${e.label}</span>`).join(", ")):o.html('<span class="category-pill">All Categories</span>')}),c.find(".clear-cat-btn").on("click",function(e){e.preventDefault(),f.length=0,d.removeClass("selected");d.filter('[data-value=""]').addClass("selected"),c.find('input[name="category[]"]').remove(),t.find(".selected-category-display").html('<span class="category-pill">All Categories</span>')}),c.find(".apply-cat-btn").on("click",function(e){e.preventDefault(),c.removeClass("active"),p()}),e(document).on("click.advancedSearchOutside",function(e){t[0].contains(e.target)||t.find(".date-container, .category-container").removeClass("active")});const u=t.find(".search-field"),v=t.find(".aae--live-search-results"),g=e(".search--wrapper.style-full-screen .wcf-search-container");function p(){if(!u.length)return;const n=u.val().trim(),a=t.find(".from-date").val(),s=t.find(".to-date").val(),o=t.find('input[name="category[]"]');if(!n&&!a&&!s&&0===o.length)return void v.hide();const c={action:"live_search",keyword:n,nonce:WCF_ADDONS_JS._wpnonce};a&&s&&(c.from_date=a,c.to_date=s),o.length>0&&(c.category=o.map(function(){return e(this).val()}).get()),e.ajax({url:WCF_ADDONS_JS.ajaxUrl,type:"POST",data:c,success:function(e){g.length&&g.addClass("ajax-fs-wrap"),v.html(e).css("display","grid"),t.find(".toggle--close").on("click",function(){v.hide(),g.length&&g.removeClass("ajax-fs-wrap")})},error:function(){v.html('<div class="error">Something went wrong.</div>').show()}})}u.on("keyup input",function(e,t){let n;return function(){const a=this,s=arguments;clearTimeout(n),n=setTimeout(()=>e.apply(a,s),t)}}(p,500))};e(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/wcf--blog--search--form.default",t)})}(jQuery);