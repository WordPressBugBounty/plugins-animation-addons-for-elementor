!function(e,t,n){let a,o=1,i="",l="",r="",c=null,s=0;(async()=>{await fetch("https://block.animation-addons.com/wp-json/templates/v2/wcf-tpl-category").then(e=>e.json()).then(e=>{a=e})})();let m="https://block.animation-addons.com/wp-json/wp/v2/wcf-templates?page=1&per_page=100&subtype=block";const d=function(e){let t=[];return e.forEach((e,n)=>{(WCF_TEMPLATE_LIBRARY?.config?.wcf_valid&&!0===WCF_TEMPLATE_LIBRARY?.config?.wcf_valid||"0"==e?.is_pro)&&(e.valid="yes"),t.push(e)}),t.reverse()},u=async function(e="",t,n=1,a=""){let i=[],l=new URL(m);t&&l.searchParams.set("subtype",t),e&&""!==e&&l.searchParams.set("cat",e),n&&(l.searchParams.set("page",n),o=n),a&&l.searchParams.set("color_type",a);try{const e=await fetch(l);if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);i=(await e.json()).templates||[]}catch(e){console.error("Fetch Error:",e)}return d(i)};e("document").ready(function(){let f=e("#tmpl-elementor-add-section");if(0<f.length){var h=f.html();h=h.replace('<div class="elementor-add-section-drag-title','<div class="elementor-add-section-area-button elementor-add-wcf-template-button"></div><div class="elementor-add-section-drag-title'),f.html(h)}elementor.on("preview:loaded",function(){e(elementor.$previewContents[0].body).on("click",".elementor-add-wcf-template-button",function(f){async function h(c,m,d="",f=""){let h=wp.template("wcf-templates");contents=null;let w=!0;y(w),contents=await h({templates:[],categories:a}),c.append(contents);const b=n.querySelector(".wcf-library-templates");i=d,l=m,r=f,0===s&&(e(t).trigger("resize"),s++);(await u(d,m,1,f)).forEach(e=>{const t=p(e);b&&(b.innerHTML+=t)}),function(){const e=n.querySelectorAll(".aaeaadon-loadmore-footer");if(!e||!e.length)return;const t=e[e.length-1],a={root:null,rootMargin:"0px",threshold:.1},c=(e,t)=>{e.forEach(async e=>{if(e.isIntersecting){let e=await u(i,l,o+1,r);const t=n.querySelector(".wcf-library-templates");e&&e.forEach(e=>{const n=p(e);t.innerHTML+=n})}})};new IntersectionObserver(function(e,t=300){let n=null;return(...a)=>new Promise((o,i)=>{n&&clearTimeout(n),n=setTimeout(async()=>{try{const t=await e(...a);o(t)}catch(e){i(e)}},t)})}(c),a).observe(t)}(),e(e(".wcf-library-template").last()).find("img").on("load",function(){w=!1,y(w),e(t).trigger("resize")}),d&&e("#wcf-template-library-filter-subtype option[value='"+d+"']").attr("selected","selected"),f&&e("#wcf-template-library-color-subtype option[value='"+f+"']").attr("selected","selected")}function w(n){0;const a=e(".wcf-template-library--header .elementor-template-library-menu-item");a.click(function(){e(this).hasClass("elementor-active")||(a.removeClass("elementor-active"),e(this).addClass("elementor-active"),o=e(this).attr("data-tab"),e(n).find(".dialog-message").remove(),h(n,o))}),e(".elementor-templates-modal__header__close").on("click",function(){t.wcftmLibrary.hide()});let o=e(".wcf-template-library--header .elementor-active").attr("data-tab");h(n,o)}function b(a=null){let o=!0;e(n).on("click",".library--action.insert",function(){let n=e(this),i=a,l=e(this).closest(".wcf-library-template").data("jurl");l&&""!=l&&(l+=".json"),null===i&&(i=e(this).closest(".wcf-library-template").data("id")),y(o),n.hide();let r={at:c.parents(".elementor-add-section-inline").index()};l?e.get({url:"https://block.animation-addons.com/wp-json/wp/v2/wcf-templates/json-content?url="+l,crossDomain:!0}).done(function(e){e?.content&&(t.wcftmLibrary.currentRequest=elementorCommon.ajax.addRequest("get_wcf_template_data",{unique_id:i,data:{edit_mode:!0,display:!0,template_id:i,json_data:e},success:function(e){$e.run("document/elements/import",{model:t.elementor.elementsModel,data:e,options:r}),o=!1,t.wcftmLibrary.hide()}}).fail(function(){}))}):t.wcftmLibrary.currentRequest=elementorCommon.ajax.addRequest("get_wcf_template_data",{unique_id:i,data:{edit_mode:!0,display:!0,template_id:i},success:function(e){$e.run("document/elements/import",{model:t.elementor.elementsModel,data:e,options:r}),o=!1,t.wcftmLibrary.hide()}}).fail(function(){})})}function y(t){let n=e(".wcf-template-library--loading");t?(n.show(),n.removeAttr("hidden")):(n.hide(),n.attr("hidden"))}f.preventDefault(),c=e(this),t.wcftmLibrary=elementorCommon.dialogsManager.createWidget("lightbox",{id:"wcf-template-library",onShow:function(){this.getElements("widget").addClass("elementor-templates-modal"),this.getElements("header").remove(),this.getElements("message").remove(),this.getElements("buttonsWrapper").remove(),function(a){let o=wp.template("wcf-templates-header");content=null,content=o({template_types:WCF_TEMPLATE_LIBRARY.template_types}),a.html(content),w(a),function(t){e(n).on("change","#wcf-template-library-filter-subtype",function(n){let a=e(".wcf-template-library--header .elementor-active").attr("data-tab"),o=this.value;e(t).find(".dialog-message").remove(),h(t,a,o,r),b()})}(a),function(t){e(n).on("change","#wcf-template-library-color-subtype",function(n){let a=e(".wcf-template-library--header .elementor-active").attr("data-tab"),o=this.value;e(t).find(".dialog-message").remove(),h(t,a,i,o),b()})}(a),function(a){const o=e("#wcf-template-library .dialog-widget-content").html();e(n).on("click",".thumbnail",function(){let t=e(this);const n=t.closest(".wcf-library-template").data("id"),o=t.closest(".wcf-library-template").data("url");let i=wp.template("wcf-templates-single");content_single=null,content_single=i({template_link:o}),a.html(content_single);let l=!0;y(l),e("#wcf-template-library iframe").on("load",function(){l=!1,y(l)}),b(n)}),e(n).off("click","#wcf-template-library-header-preview-back"),e(n).on("click","#wcf-template-library-header-preview-back",function(){e("#wcf-template-library .dialog-widget-content").html(o),y(!1),w(a)}),e(n).on("click",".elementor-templates-modal__header__close",function(){t.wcftmLibrary.hide()})}(a),function(){function t(e,t){let n;return function(...a){clearTimeout(n),n=setTimeout(()=>e.apply(this,a),t)}}e(n).on("keyup","#wcf-template-library-filter-text",t(async function(){const t=this.value.toLowerCase(),a=n.querySelector(".wcf-library-templates"),o=await async function(t=""){let n=e("#elementor-template-library-header-menu .elementor-active").attr("data-tab")||"block",a=[],o=new URL(m);n&&o.searchParams.set("subtype",n),t&&""!==t&&o.searchParams.set("s",t);const i=e("wcf-template-library-filter-subtype").val();i&&""!==i&&o.searchParams.set("cat",i);try{const e=await fetch(o);if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);a=(await e.json()).templates||[]}catch(e){console.error("Fetch Error:",e)}return d(a)}(t);a.innerHTML="",o.forEach(e=>{const t=p(e);a.innerHTML+=t}),setTimeout(()=>{const n=e(".wcf-library-template"),a=new RegExp(t,"i");n.each((t,n)=>{const o=e(n).find(".title")[0];a.test(o.textContent)&&(o.innerHTML=o.textContent.replace(a,"<b>$&</b>"))})},100)},300))}(),b()}(this.getElements("widgetContent"))},onHide:function(){t.wcftmLibrary.destroy()}}),t.wcftmLibrary.getElements("header").remove(),t.wcftmLibrary.show(),e(t).trigger("resize")})})}),e(n).on("click",".aaeplugin-activate",function(e){e.preventDefault(),confirm("Are you sure you want to activate plugin? Any unsaved changes will be lost. Please Save change.")&&(async()=>{await fetch(WCF_TEMPLATE_LIBRARY.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams({action:"activate_from_editor_plugin",action_base:"animation-addons-for-elementor-pro/animation-addons-for-elementor-pro.php",nonce:WCF_TEMPLATE_LIBRARY.nonce})}).then(e=>e.json()).then(e=>{e?.success&&t.location.reload()})})()});const p=e=>`\n            <div class="wcf-library-template" data-jurl="${e.json_url}" data-id="${e.id}" data-url="${e.template_demo_url}">\n                <div class="thumbnail">\n                    <img src="${e?.preview?.url}" alt="${e.title}">\n                </div>\n                \n                ${e?.valid&&e.valid?'\n                    \x3c!-- Show the \'Insert\' button if the template is valid --\x3e\n                    <button class="library--action insert">\n                        <i class="eicon-file-download"></i>\n                        Insert\n                    </button>\n                ':`\n                    \x3c!-- Show premium or activation buttons based on plugin status --\x3e\n                    ${WCF_TEMPLATE_LIBRARY?.pro_installed?"":'\n                        \x3c!-- Show \'Go Premium\' button if the plugin is not installed --\x3e\n                        <a href="https://animation-addons.com" class="library--action pro" target="_blank">\n                            <i class="eicon-external-link-square"></i>\n                            Go Premium\n                        </a>\n                    '}\n                    ${WCF_TEMPLATE_LIBRARY?.pro_installed&&WCF_TEMPLATE_LIBRARY?.pro_active&&!WCF_TEMPLATE_LIBRARY?.config?.wcf_valid?`\n                        \x3c!-- Show 'Pro' button if the plugin is installed and active --\x3e\n                        <a href="${WCF_TEMPLATE_LIBRARY.dashboard_link}" class="library--action pro" target="_blank">\n                            <i class="eicon-external-link-square"></i>\n                            Activate License\n                        </a>\n                    `:""}\n                    ${WCF_TEMPLATE_LIBRARY?.pro_installed&&!WCF_TEMPLATE_LIBRARY?.pro_active?'\n                        \x3c!-- Show \'Activate\' button if the plugin is installed but not active --\x3e\n                        <button class="library--action pro aaeplugin-activate">\n                            <i class="eicon-external-link-square"></i>\n                            Activate\n                        </button>\n                    ':""}\n                `}\n                \n                <p class="title">${e.title}</p>\n            </div>\n        `}(jQuery,window,document);