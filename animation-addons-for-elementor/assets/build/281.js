"use strict";(self.webpackChunkwcf_addons=self.webpackChunkwcf_addons||[]).push([[281],{1990:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var s=a(1609),r=a(6792);const n=({size:e=24,className:t,...a})=>(0,s.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,r.cn)("animate-spin",t)},(0,s.createElement)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}));var o=a(4848);function l(...e){const t=e[0];if(1===e.length)return t;const a=()=>{const a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=a.reduce((t,{useScope:a,scopeName:s})=>({...t,...a(e)[`__scope${s}`]}),{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}a(5795);var c=a(3362),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const a=(0,c.TL)(`Primitive.${t}`),r=s.forwardRef((e,s)=>{const{asChild:r,...n}=e,l=r?a:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(l,{...n,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),m="Progress",[p,d]=function(e,t=[]){let a=[];const r=()=>{const t=a.map(e=>s.createContext(e));return function(a){const r=a?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return r.scopeName=e,[function(t,r){const n=s.createContext(r);n.displayName=t+"Context";const l=a.length;a=[...a,r];const c=t=>{const{scope:a,children:r,...c}=t,i=a?.[e]?.[l]||n,m=s.useMemo(()=>c,Object.values(c));return(0,o.jsx)(i.Provider,{value:m,children:r})};return c.displayName=t+"Provider",[c,function(a,o){const c=o?.[e]?.[l]||n,i=s.useContext(c);if(i)return i;if(void 0!==r)return r;throw new Error(`\`${a}\` must be used within \`${t}\``)}]},l(r,...t)]}(m),[u,h]=p(m),f=s.forwardRef((e,t)=>{const{__scopeProgress:a,value:s=null,max:r,getValueLabel:n=v,...l}=e;!r&&0!==r||N(r)||console.error(`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const c=N(r)?r:100;null===s||b(s,c)||console.error(`Invalid prop \`value\` of value \`${`${s}`}\` supplied to \`Progress\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`);const m=b(s,c)?s:null,p=_(m)?n(m,c):void 0;return(0,o.jsx)(u,{scope:a,value:m,max:c,children:(0,o.jsx)(i.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":_(m)?m:void 0,"aria-valuetext":p,role:"progressbar","data-state":x(m,c),"data-value":m??void 0,"data-max":c,...l,ref:t})})});f.displayName=m;var g="ProgressIndicator",w=s.forwardRef((e,t)=>{const{__scopeProgress:a,...s}=e,r=h(g,a);return(0,o.jsx)(i.div,{"data-state":x(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:t})});function v(e,t){return`${Math.round(e/t*100)}%`}function x(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function _(e){return"number"==typeof e}function N(e){return _(e)&&!isNaN(e)&&e>0}function b(e,t){return _(e)&&!isNaN(e)&&e<=t&&e>=0}w.displayName=g;var y=f,P=w;const E=s.forwardRef(({className:e,value:t,...a},n)=>(0,s.createElement)(y,{ref:n,className:(0,r.cn)("relative h-2 w-full overflow-hidden rounded-full bg-background-secondary",e),...a},(0,s.createElement)(P,{className:"h-full w-full flex-1 bg-[linear-gradient(90deg,#00D202_0%,#23C6CF_100%)] transition-all",style:{transform:`translateX(-${100-(0===t?-1:t||-1)}%)`}})));E.displayName=y.displayName;var S=a.p+"images/demo-importing-bg.b2796b8f.png",C=a(9179),D=()=>{const[e,t]=(0,s.useState)(!1),[a,o]=(0,s.useState)(""),[l,c]=(0,s.useState)(""),[i,m]=(0,s.useState)(null),[p,d]=(0,s.useState)(0),{setTabKey:u}=(0,C.OL)(),h=new URL(window.location.href),f=h.searchParams.get("template"),g=h.searchParams.get("templateid"),w=h.searchParams.get("plugins"),v=h.searchParams.get("theme"),x=h.searchParams.get("attachment"),_=(e,t)=>{const a=h.searchParams.get("page");h.search="",h.hash="",h.search=`page=${a}`,h.searchParams.set("template",f),h.searchParams.set("templateid",g),h.searchParams.set("tab",e),t.plugins&&h.searchParams.set("plugins",t.plugins),t.theme&&h.searchParams.set("theme",t.theme),h.searchParams.set("attachment",t.attachment),window.history.replaceState({},"",h),u(e)},[N,b]=(0,s.useState)("Varifying"),[y,P]=(0,s.useState)();(0,s.useEffect)(()=>{if(e){M(e);const t=setInterval(()=>{$()},5e3);return()=>clearInterval(t)}D(g)},[e]);const D=(0,s.useCallback)((0,r.eD)(async e=>{try{const a=new URL(`${WCF_ADDONS_ADMIN?.st_template_domain}wp-json/wp/v2/starter-templates`);e&&a.searchParams.append("tplid",e),await fetch(a.toString()).then(e=>e.json()).then(a=>{if(a?.templates){const s=Object.entries(a.templates).find(([t,a])=>a.id==e)?.[1];t(s)}})}catch(e){console.log(e)}}),[]),$=async()=>{const e=new URL(window.location.href).searchParams.get("tab");if(e&&"complete-import"==e)return;const t=new URLSearchParams;t.append("action","aaeaddon_heartbeat_data"),t.append("nonce",WCF_ADDONS_ADMIN.nonce);const a=await fetch(WCF_ADDONS_ADMIN.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const s=a.headers.get("content-type");if(s&&s.includes("application/json")){const e=await a.json();if("single"===e?.import_porgress?.type){const t=e.import_porgress.progress||0,a=e.import_porgress.total_items||1,s=Math.min(Math.round(t/a*100),100),r=Math.floor(5*Math.random())+40,n=t/a*50,l=Math.min(Math.round(r+n),100);c(e.import_porgress?.title),d(e=>Math.max(e,l)),o(`ðŸ“¦ Content Import: ${s}% (${t} of ${a})\n`)}}},M=(0,s.useCallback)((0,r.eD)(async e=>{try{delete e.author,delete e.categories,delete e.date,delete e.demo_link,delete e.user_favourite,delete e.template_preview,delete e.downloads,delete e.is_pro,delete e.excerpt,m(e);const t=new URLSearchParams;e?.next_step&&"download-xml-file"==e.next_step?t.append("action","aaeaddon_upload_manual_import_file"):t.append("action","aaeaddon_template_installer"),t.append("import_type","full-demo"),t.append("template_data",JSON.stringify(e)),t.append("nonce",WCF_ADDONS_ADMIN.nonce),w&&t.append("user_plugins",w),v&&t.append("theme_slug",v),t.append("attachment",x);const a=await fetch(WCF_ADDONS_ADMIN.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const s=a.headers.get("content-type");if(s&&s.includes("application/json")){const t=await a.json();void 0!==t.status&&"newAJAX"===t.status&&(t?.state&&""!==t.state&&o(t.state),M(e)),t?.progress&&d(e=>Number(t.progress)>Number(e)?t.progress:e),t?.template&&(!0==("done"===t.template.next_step?.trim().toLowerCase())?(e=>{const t=h.searchParams.get("page");h.search="",h.hash="",h.search=`page=${t}`,h.searchParams.set("tab",e),window.history.replaceState({},"",h),u(e)})("complete-import"):"fail"===t.template.next_step?_("fail-import",{plugins:w,theme:v,attachment:x}):(M(t.template),t?.template?.next_step&&b(t.template.next_step),t?.msg&&o(t.msg)))}else M(e)}catch(e){console.error("Fetch failed:",e.message),o(e.message),i?M(i):_("fail-import",{plugins:w,theme:v,attachment:x,msg:e.message})}},300),[]);return(0,s.createElement)("div",{className:"bg-background w-[680px] rounded-2xl p-1.5 shadow-auth-card"},(0,s.createElement)("div",{className:"border border-border-secondary rounded-xl p-8"},(0,s.createElement)("div",{className:"mb-6"},(0,s.createElement)("h3",{className:"text-2xl font-medium"},e?"Creating your website...":"Template finding....."," "),(0,s.createElement)("p",{className:"mt-1.5 text-text-secondary"},"Please wait, your website is being created. It will take few minute. Do not reload."),(0,s.createElement)("p",{className:"total-State mt-1.5 text-text-secondary"},y)),(0,s.createElement)("div",{className:"mb-8"},(0,s.createElement)("img",{src:S,className:"w-[616px] h-[258px]",alt:"demo importing"})),(0,s.createElement)("div",null,(0,s.createElement)("h4",{className:"text-xl font-medium mb-2"},l),(0,s.createElement)("p",{className:"text-text-secondary"},(0,s.createElement)("span",{className:"text-text"})," ",a),(0,s.createElement)("div",{className:"mt-4"},(0,s.createElement)("span",null,(0,s.createElement)(E,{value:p}))),(0,s.createElement)("div",{className:"flex items-center gap-1.5 mt-3"},(0,s.createElement)(n,{className:"text-[#07B22B]"})," ",(0,s.createElement)("p",{className:"text-sm"},(0,s.createElement)("span",null,p,"%")," Completed")))))}}}]);