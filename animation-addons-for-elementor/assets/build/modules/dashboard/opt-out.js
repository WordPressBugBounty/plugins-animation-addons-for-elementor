!function(){"use strict";const e="animation-addons-for-elementor",n="https://data.animation-addons.com/wp-json/wmd/v1/feedback",t={PLUGIN_ROW:'tr[data-slug="animation-addons-for-elementor"]',DEACTIVATE_LINK:".deactivate a",MODAL_OVERLAY:"#aae-deactivate-overlay",CLOSE_BUTTON:".close-btn",SKIP_BUTTON:".skip-btn",SUBMIT_BUTTON:".submit-btn",RADIO_INPUTS:'input[name="reason"]',MESSAGE_WRAPPER:".other-reason",MESSAGE_INPUT:"#feedback-message"},a=`\n        <div class="modal-content">\n            <div class="modal-header">\n                <div class="header-content">\n                    <div class="header-left">\n                        <div class="wp-logo">\n                            <img src="${aae_ajax.logo_url}" alt="logo" />\n                        </div>\n                        <h3>Provide a feedback</h3>\n                    </div>\n                    <div class="close-btn">&times;</div>\n                </div>\n            </div>\n            <div class="modal-body">\n                <div class="question">\n                    What made you deactivate Animation Addons?\n                </div>\n                <div class="feedback-form">\n                    <div class="radio-group">\n                        <label>\n                            <input type="radio" name="reason" value="I no longer need the plugin." />\n                            <span>I no longer need the plugin.</span>\n                        </label>\n                        <label>\n                            <input type="radio" name="reason" value="I found a better plugin." />\n                            <span>I found a better plugin.</span>\n                        </label>\n                        <label>\n                            <input type="radio" name="reason" value="I couldn't get the plugin to work." />\n                            <span>I couldn't get the plugin to work.</span>\n                        </label>\n                        <label>\n                            <input type="radio" name="reason" value="It's a temporary deactivation." />\n                            <span>It's a temporary deactivation.</span>\n                        </label>\n                        <label>\n                            <input type="radio" name="reason" value="I have Elementor Pro" />\n                            <span>I have Elementor Pro.</span>\n                        </label>\n                        <label>\n                            <input type="radio" name="reason" value="others" />\n                            <span>Others (Please specify)</span>\n                        </label>\n                    </div>\n                    <div class="other-reason">\n                        <textarea placeholder="Please share us the reason." id="feedback-message"></textarea>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button class="skip-btn">Skip & Deactivate</button>\n                <button class="submit-btn">Submit & Deactivate</button>\n            </div>\n        </div>\n    `,i=e=>document.querySelector(e),s=(e,n,t)=>{e&&e.addEventListener(n,t)},o={overlay:null,isVisible:!1,init(){this.createOverlay(),this.bindEvents()},createOverlay(){this.overlay=((e,n,t)=>{const a=document.createElement(e);return n&&(a.className=n),t&&(a.innerHTML=t),a})("div","aae-deactivate-modal"),this.overlay.id="aae-deactivate-overlay",this.overlay.style.display="none",this.overlay.innerHTML=a,document.body.appendChild(this.overlay)},show(){this.overlay&&(this.overlay.style.display="block",document.body.style.overflow="hidden",this.isVisible=!0)},hide(){this.overlay&&(this.overlay.style.display="none",document.body.style.overflow="",this.isVisible=!1)},bindEvents(){s(this.overlay,"click",e=>{e.target===this.overlay&&this.hide()}),s(document,"keydown",e=>{"Escape"===e.key&&this.isVisible&&this.hide()})}},l={init(){this.bindFormEvents()},bindFormEvents(){var e;(e=t.RADIO_INPUTS,document.querySelectorAll(e)).forEach(e=>{s(e,"change",this.handleRadioChange.bind(this))});const n=i(t.CLOSE_BUTTON);s(n,"click",()=>o.hide());const a=i(t.SKIP_BUTTON);s(a,"click",this.handleSkip.bind(this));const l=i(t.SUBMIT_BUTTON);s(l,"click",this.handleSubmit.bind(this))},handleRadioChange(e){const n=i(t.MESSAGE_WRAPPER);"others"===e.target.value?n.style.display="block":n.style.display="none"},handleSkip(){o.hide(),r.proceed()},async handleSubmit(){const e=i('input[name="reason"]:checked');if(!e)return void alert("Please select a reason for deactivation.");const n=i(t.SUBMIT_BUTTON);n.disabled=!0,n.textContent="Submitting...";try{await d.submit(e.value)}catch(e){console.error("Feedback submission failed:",e)}finally{o.hide(),r.proceed()}}},d={async submit(a){const s=window.location.origin,o=i(t.MESSAGE_INPUT),l="others"===a?o.value:a,d=new URLSearchParams({plugin_slug:e,page_url:s,comment:l,rating:""}),r=await fetch(`${n}?${d}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const c=await r.json();if(!c.ok)throw new Error("Feedback submission failed");return console.log("Feedback submitted successfully"),c}},r={link:null,init(){this.findDeactivateLink(),this.bindDeactivateEvent()},findDeactivateLink(){const e=i(t.PLUGIN_ROW);e&&(this.link=e.querySelector(t.DEACTIVATE_LINK))},bindDeactivateEvent(){this.link&&s(this.link,"click",this.handleDeactivateClick.bind(this))},handleDeactivateClick(e){e.preventDefault(),o.show()},proceed(){this.link&&(window.location.href=this.link.href)}};({init(){"loading"===document.readyState?s(document,"DOMContentLoaded",this.start.bind(this)):this.start()},start(){this.isPluginsPage()&&this.pluginExists()&&(o.init(),l.init(),r.init())},isPluginsPage(){return window.location.pathname.includes("plugins.php")},pluginExists(){return!!i(t.PLUGIN_ROW)}}).init()}();